<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Node2D double click detection in Godot - Csharp and Game Development Notes</title><meta name="description" content="Clicks for Node2D based nodes can easily be detected by using CollisionObject2D‘s input_event signal. To capture the mouse clicks we can add an Area2D node and a CollisionShape2D or CollisionPolygon2D&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="stylesheet" href="https://pilvimaa.fi/media/plugins/syntaxHighlighter/prism-black.css"><link rel="canonical" href="https://pilvimaa.fi/node2d-double-click-detection-in-godot/"><link rel="alternate" type="application/atom+xml" href="https://pilvimaa.fi/feed.xml"><link rel="alternate" type="application/json" href="https://pilvimaa.fi/feed.json"><link rel="shortcut icon" href="https://pilvimaa.fi/media/website/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="https://pilvimaa.fi/assets/css/style.css?v=883afb3621d8d9edd7f006e174496a4d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://pilvimaa.fi/node2d-double-click-detection-in-godot/"},"headline":"Node2D double click detection in Godot","datePublished":"2023-06-14T02:08","dateModified":"2023-06-14T02:08","image":{"@type":"ImageObject","url":"https://pilvimaa.fi/media/posts/14/computer_mice_double_click.png","height":1024,"width":1024},"description":"Clicks for Node2D based nodes can easily be detected by using CollisionObject2D‘s input_event signal. To capture the mouse clicks we can add an Area2D node and a CollisionShape2D or CollisionPolygon2D&hellip;","author":{"@type":"Person","name":"Pilvinen","url":"https://pilvimaa.fi/authors/pilvinen/"},"publisher":{"@type":"Organization","name":"Pilvinen","logo":{"@type":"ImageObject","url":"https://pilvimaa.fi/media/website/Hedgehog.png","height":397,"width":640}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-NT7DGE75CF"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NT7DGE75CF');</script></head><body class="post-template"><header class="top js-header"><a class="logo" href="https://pilvimaa.fi/"><img src="https://pilvimaa.fi/media/website/Hedgehog.png" alt="Csharp and Game Development Notes" width="640" height="397"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://www.starandserpent.com" title="Star and Serpent" target="_blank">Star and Serpent</a></li><li><a href="https://www.starandserpent.com/blog/" title="S.&#x27;.S.&#x27;. blog" target="_blank">S.&#x27;.S.&#x27;. Blog</a></li><li><a href="https://github.com/starandserpent" title="S.&#x27;.S.&#x27;. Github" target="_blank">S.&#x27;.S.&#x27;. Github</a></li><li><a href="https://github.com/Pilvinen" title="Personal Github" target="_blank">Personal Github</a></li></ul></nav></header><main class="post"><article class="content"><div class="hero"><header class="hero__content"><div class="wrapper"><h1>Node2D double click detection in Godot</h1><div class="feed__meta content__meta"><img src="https://pilvimaa.fi/media/website/Pilvinen-As_Space_Techno_Wizard.png" loading="eager" height="1024" width="1024" class="feed__author-thumb" alt="Pilvinen"> <a href="https://pilvimaa.fi/authors/pilvinen/" class="feed__author">Pilvinen</a> <time datetime="2023-06-14T02:08" class="feed__date">June 14, 2023</time></div></div></header><figure class="hero__image"><div class="hero__image-wrapper"><img src="https://pilvimaa.fi/media/posts/14/computer_mice_double_click.png" srcset="https://pilvimaa.fi/media/posts/14/responsive/computer_mice_double_click-xs.webp 640w, https://pilvimaa.fi/media/posts/14/responsive/computer_mice_double_click-sm.webp 768w, https://pilvimaa.fi/media/posts/14/responsive/computer_mice_double_click-md.webp 1024w, https://pilvimaa.fi/media/posts/14/responsive/computer_mice_double_click-lg.webp 1366w, https://pilvimaa.fi/media/posts/14/responsive/computer_mice_double_click-xl.webp 1600w, https://pilvimaa.fi/media/posts/14/responsive/computer_mice_double_click-2xl.webp 1920w" sizes="88vw" loading="eager" height="1024" width="1024" alt="Two mice using a computer mouse"></div></figure></div><div class="entry-wrapper content__entry"><p>Clicks for <code>Node2D</code> based nodes can easily be detected by using <code>CollisionObject2D</code>‘s <code>input_event</code> signal.</p><p>To capture the mouse clicks we can add an <code>Area2D</code> node and a <code>CollisionShape2D</code> or <code>CollisionPolygon2D</code> as its child node.</p><p>Since we are using <code>CollisionObject2D</code>‘s <code>input_event</code> signal directly the <code>Area2D</code>‘s <code>Monitoring</code> and <code>Monitorable</code> won’t be used and we can disable those.</p><p><code>Area2D</code>‘s ‘<code>Collision &gt; Layer</code> needs to be set to some value or the clicks won’t be detected.</p><p>The <code>Area2D</code> node also needs to have <code>Input &gt; Pickable</code> set to <code>True</code>.</p><p>Give the <code>CollisionShape2D</code> a <code>Shape</code>, eg. <code>RectangleShape2D</code>, <code>CircleShape2D</code>, <code>CapsuleShape2D</code>, etc. and set its <code>Size</code> to the dimensions you want. This defines the area’s size and shape that can be clicked with the mouse.</p><p>Finally set the <code>CollisionShape2D</code>‘s <code>Transform &gt; Position</code> to the location where you want it.</p><p>Now we can add a script to the <code>Area2D</code> node and in <code>Area2D</code>‘s <code>Node &gt; Signals</code> connect the <code>input_event</code> to the script.</p><p>See example below.</p><pre><code class="language-cs">public void OnContainerBeingClicked(Node viewport, InputEvent @event, int shapeIdx) {  
  
    // Return if not mouse left button double click.  
    if (@event is not InputEventMouseButton mouseButtonEvent) return;  
    if (!mouseButtonEvent.Pressed) return;  
    if (mouseButtonEvent.ButtonIndex != MouseButton.Left) return;  
    if (!mouseButtonEvent.DoubleClick) return;  
  
    ToggleContainer();  
}
</code></pre><p>The code is pretty self-explanatory, but let’s break it down.</p><p>In the method signature we need to return <code>void</code>, and accept <code>Node</code>, <code>InputEvent</code>, and <code>int</code> as parameters - even if we don’t use them all. It’s simply required to connect the signal.</p><p>Since <code>event</code> is a reserved keyword we are required to place <code>@</code> in front of it if we want to use that particular name in our parameters, ie. <code>@event</code> instead of <code>event</code>. But we might as well use any other name such as <code>inputEvent</code> if it strikes your fancy - it really doesn’t matter. The parameter names can be what ever you want as long as the types match <code>Node</code>, <code>InputEvent</code> and <code>int</code>. The signal will still work.</p><p>We cannot directly handle <code>InputEventMouseButton</code>, so we need to use <code>InputEvent</code> instead and cast it to <code>InputEventMouseButton</code>:</p><pre><code class="language-cs">if (@event is not InputEventMouseButton mouseButtonEvent) return;  
</code></pre><p>Here we check whether <code>@event</code> is or isn’t <code>InputEventMouseButton</code>. If it’s not we simply return and do nothing further with that particular input event - someone else can handle that one, what ever it is.</p><p>If the <code>@event</code> is <code>InputEventMouseButton</code> we cast it as <code>InputEventMouseButton</code> and expose the cast as a local variable called <code>mouseButtonEvent</code> and continue executing our code. We can now access the <code>InputEventMouseButton</code> mouse button event via <code>mouseButtonEvent</code> and do further things.</p><pre><code class="language-cs">if (!mouseButtonEvent.Pressed) return;
</code></pre><p>Here we immediately put it to use and check if the mouse button is not being pressed (ie. it’s likely being released instead), we will simply return and call it quits there - it’s not our concern.</p><pre><code class="language-cs">if (mouseButtonEvent.ButtonIndex != MouseButton.Left) return;
</code></pre><p>We still don’t know what kind of mouse button press this was, so we can check by using the <code>ButtonIndex</code> whether it was something else than a <strong>left</strong> mouse button press - in which case we simply return and call it quits again. It’s not our concern, since in this example we want to handle left mouse buttons clicks only.</p><pre><code class="language-csharp">if (!mouseButtonEvent.DoubleClick) return;
</code></pre><p>Finally we have a very handy way of checking whether a double click happened without having to deal with timers and special logic each time - we can simply check the <code>DoubleClick</code> property. Godot will expose to us automatically the information whether it was a double click or not. If it’s not a double click, again, we return and call it quits there.</p><p>Now we’ve determined:</p><ol><li>It is a mouse button event.</li><li>It is a mouse button being pressed down event.</li><li>It is a left mouse button event.</li><li>It is a double click</li></ol><p>So we know the user did a left mouse button double click, so we can now do what ever we want with that information.</p><pre><code class="language-csharp">ToggleContainer();
</code></pre><p>In the above example what we do is we call our own custom <code>ToggleContainer()</code> method which opens - or closes - an inventory container window for us.</p><p>But you can call your own methods or do what ever you want once you’ve ruled out all the cases you don’t want to react to like we did above one step at a time.</p><p>You can also combine the if-statements if you like. We have kept them separate in the example for additional clarity and readability.</p><p>But you might also do this:</p><pre><code class="language-csharp">if (@event is not InputEventMouseButton mouseButtonEvent  
    || !mouseButtonEvent.Pressed  
    || mouseButtonEvent.ButtonIndex != MouseButton.Left  
    || !mouseButtonEvent.DoubleClick) {  
    return;  
}
</code></pre><p>The IL code produced by either of these examples is slightly different, but not meaningfully so.</p><p>It’s also worth noting that when using <code>return</code>s, like in the first example, the stack traces can be more meaningful when tracking down problems.</p><p>But generally the second example would execute faster. But this would be in the realm of nano optimizations and might be made a moot point anyway by future updates to the runtime.</p><p>It’s also worth noting that in Godot 4 you can implicitly cast the <code>Node</code> by accepting <code>Viewport</code> instead of <code>Node</code> in the signal’s method signature as a parameter - and it will still work because <code>Viewport</code> is a child of <code>Node</code>.</p><p>So if you want to handle the input, for example, so it doesn’t propagate any further - and you don’t want to cast the <code>Node</code> in your code explicitly to <code>Viewport</code> which you need to access the <code>SetInputAsHandled()</code> method, you can accept a <code>Viewport</code> directly instead of <code>Node</code> which is declared in the <code>input_event</code> signal’s signature.</p><p>Eg.</p><pre><code class="language-csharp">public void OnContainerBeingClicked(Viewport viewport, InputEvent @event, int shapeIdx) {  
  
    // Return if not mouse left button double click.  
    if (@event is not InputEventMouseButton mouseButtonEvent) return;  
    if (!mouseButtonEvent.Pressed) return;  
    if (mouseButtonEvent.ButtonIndex != MouseButton.Left) return;  
    if (!mouseButtonEvent.DoubleClick) return;  
      
    viewport.SetInputAsHandled();  
    ToggleContainer();  
}
</code></pre><p>This will also work. Otherwise we would have to:</p><pre><code class="language-csharp">public void OnContainerBeingClicked(Node viewport, InputEvent @event, int shapeIdx) {  
  
    // Return if not mouse left button double click.  
    if (@event is not InputEventMouseButton mouseButtonEvent) return;  
    if (!mouseButtonEvent.Pressed) return;  
    if (mouseButtonEvent.ButtonIndex != MouseButton.Left) return;  
    if (!mouseButtonEvent.DoubleClick) return;  
      
    ((Viewport)viewport).SetInputAsHandled();  
    ToggleContainer();  
}
</code></pre><p>That’s mostly it for handling mouse double clicks in Node2D nodes.</p></div><footer class="content__footer"><div class="entry-wrapper"><p class="content__updated">This article was updated on June 14, 2023</p><div class="content__actions"><ul class="content__tag"><li><a href="https://pilvimaa.fi/tag/c/">C#</a></li><li><a href="https://pilvimaa.fi/tag/csharp/">Csharp</a></li><li><a href="https://pilvimaa.fi/tag/godot/">Godot</a></li><li><a href="https://pilvimaa.fi/tag/input/">Input</a></li><li><a href="https://pilvimaa.fi/tag/inputevent/">InputEvent</a></li></ul></div><div class="content__bio bio"><img src="https://pilvimaa.fi/media/website/Pilvinen-As_Space_Techno_Wizard.png" loading="lazy" height="1024" width="1024" class="bio__avatar" alt="Pilvinen"><div><h3 class="h4 bio__name"><a href="https://pilvimaa.fi/authors/pilvinen/" rel="author">Pilvinen</a></h3><div class="bio__desc">Star and Serpent indie game studio founder, team leader, programmer wannabe, and game designer. Human friendly. Likes to talk. Interested in math, sciences, logic, languages, literature, medieval history, programming, philosophy, and games.</div></div></div></div><nav class="content__nav"><div class="wrapper"><div class="content__nav-inner"><div class="content__nav-prev"><a href="https://pilvimaa.fi/implicit-and-explicit-conversion-operators/" class="content__nav-link" rel="prev"><figure class="content__nav-image"><img src="https://pilvimaa.fi/media/posts/13/responsive/Spaghetti-xs.webp" class="lazyload" loading="lazy" alt="" height="720" width="720"></figure><div><span>Previous</span> Implicit and explicit conversion operators</div></a></div><div class="content__nav-next"><a href="https://pilvimaa.fi/gdscript-vs-c-in-godot-which-language-should-you-use/" class="content__nav-link" rel="next"><div><span>Next</span> GDScript vs. C# in Godot: Which language should you use?</div><figure class="content__nav-image"><img src="https://pilvimaa.fi/media/posts/15/responsive/csharp_vs_gdscript_godot-xs.webp" class="lazyload" loading="lazy" alt="Confusing schematics" height="1024" width="1024"></figure></a></div></div></div></nav></footer></article></main><footer class="footer"><div class="wrapper"><div class="footer__copyright"><p><a href="https://www.starandserpent.com" target="_blank" rel="noopener noreferrer">https://www.starandserpent.com</a></p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg width="20" height="20"><use xlink:href="https://pilvimaa.fi/assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script defer="defer" src="https://pilvimaa.fi/assets/js/scripts.min.js?v=ffcbea6c02c8178d10092962b235a5b0"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://pilvimaa.fi/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://pilvimaa.fi/media/plugins/syntaxHighlighter/prism-line-numbers.min.js"></script><script defer="defer" src="https://pilvimaa.fi/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://pilvimaa.fi/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script></body></html>