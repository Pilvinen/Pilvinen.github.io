<!DOCTYPE html><html lang="en-us"><head><link rel="stylesheet" href="https://pilvimaa.fi/assets/css/prism.css?v=1caa16b9d9db6430ff86df681aca81b1"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Implicit and explicit conversion operators - Csharp and Game Development Notes</title><meta name="description" content="Implicit and explicit conversion operators allow you to ingegrate your custom types seamlessly with other types by doing implicit or explicit conversions from one type to another. public void SetPositionFromVector3(Vector3&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://pilvimaa.fi/implicit-and-explicit-conversion-operators/"><link rel="alternate" type="application/atom+xml" href="https://pilvimaa.fi/feed.xml"><link rel="alternate" type="application/json" href="https://pilvimaa.fi/feed.json"><link rel="shortcut icon" href="https://pilvimaa.fi/media/website/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="https://pilvimaa.fi/assets/css/style.css?v=7ee03c35559acda410ec1c38d6c6c98d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://pilvimaa.fi/implicit-and-explicit-conversion-operators/"},"headline":"Implicit and explicit conversion operators","datePublished":"2022-07-29T16:15","dateModified":"2022-07-30T10:25","image":{"@type":"ImageObject","url":"https://pilvimaa.fi/media/posts/13/Spaghetti.jpg","height":720,"width":960},"description":"Implicit and explicit conversion operators allow you to ingegrate your custom types seamlessly with other types by doing implicit or explicit conversions from one type to another. public void SetPositionFromVector3(Vector3&hellip;","author":{"@type":"Person","name":"Pilvinen","url":"https://pilvimaa.fi/authors/pilvinen/"},"publisher":{"@type":"Organization","name":"Pilvinen","logo":{"@type":"ImageObject","url":"https://pilvimaa.fi/media/website/Hedgehog.png","height":397,"width":640}}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-NT7DGE75CF"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NT7DGE75CF');</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://pilvimaa.fi/"><img src="https://pilvimaa.fi/media/website/Hedgehog.png" alt="Csharp and Game Development Notes" width="640" height="397"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://www.starandserpent.com" title="Star and Serpent" target="_blank">Star and Serpent</a></li><li><a href="https://www.starandserpent.com/blog/" title="S.&#x27;.S.&#x27;. blog" target="_blank">S.&#x27;.S.&#x27;. Blog</a></li><li><a href="https://github.com/starandserpent" title="S.&#x27;.S.&#x27;. Github" target="_blank">S.&#x27;.S.&#x27;. Github</a></li><li><a href="https://github.com/Pilvinen" title="Personal Github" target="_blank">Personal Github</a></li></ul></nav></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://pilvimaa.fi/media/posts/13/Spaghetti.jpg" srcset="https://pilvimaa.fi/media/posts/13/responsive/Spaghetti-xs.jpg 300w, https://pilvimaa.fi/media/posts/13/responsive/Spaghetti-sm.jpg 480w, https://pilvimaa.fi/media/posts/13/responsive/Spaghetti-md.jpg 768w, https://pilvimaa.fi/media/posts/13/responsive/Spaghetti-lg.jpg 1024w, https://pilvimaa.fi/media/posts/13/responsive/Spaghetti-xl.jpg 1360w, https://pilvimaa.fi/media/posts/13/responsive/Spaghetti-2xl.jpg 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="720" width="960" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2022-07-29T16:15">July 29, 2022</time></div><h1>Implicit and explicit conversion operators</h1><div class="post__meta post__meta--author"><img src="https://pilvimaa.fi/media/website/Pilvinen-As_Space_Techno_Wizard.png" loading="eager" height="1024" width="1024" class="post__author-thumb" alt="Pilvinen"> <a href="https://pilvimaa.fi/authors/pilvinen/" class="feed__author">Pilvinen</a></div></div></header></div><div class="wrapper post__entry"><p>Implicit and explicit conversion operators allow you to ingegrate your custom types seamlessly with other types by doing implicit or explicit conversions from one type to another.</p><pre><code class="language-cs">    public void SetPositionFromVector3(Vector3 vector) {
        // Do stuff.
    }

    MyType myType = new MyType(0,0,0);
    SetPositionFromVector3(myType); // Argument type &#39;MyType&#39; is not assignable to parameter type &#39;Vector3&#39;
</code></pre><p>If you’ve ever experienced one of those situations where you have your awesome custom type <code>MyType</code> which is essentially a <code>Vector3</code>, or what ever, with some extra spices that you really need … but now you can’t pass it to anything that really wants a <code>Vector3</code>. And you end up doing all kinds of weird things like exposing a special property or using inheritance and polymorphism to get it working…</p><p>Do not fret! We’ll have none of those shenanigans. <code>implicit</code> and <code>explicit</code> conversion operators to the rescue!</p><p>Let’s look at a simplification of how <code>implicit</code> operator is used.</p><pre><code class="language-cs">class MyType {
    private Vector3 _myValue;
    public float x =&gt; _myValue.x;
    public float y =&gt; _myValue.x;
    public float z =&gt; _myValue.x;
    public static implicit operator Vector3(MyType myType) =&gt; _myvalue;
    //  ^    ^       ^        ^       ^        ^-- Input type    ^-- Return value
    //  |    |       |        |       `-- Output type
    //  `----`-------`--------`-- Magical keywords
}
</code></pre><p>That’s how you get it working. But lets examine this declaration word by word and break it apart.</p><p>All the operators have to be declared <code>public</code> and they also have to be <code>static</code>. Next we declare the <code>implicit</code> or <code>explicit</code> keyword. What <code>implicit</code> means is basically “Don’t ask stupid questions, just do the conversion for me - <em>implicitly</em>, automatically, ie. it is <em>implied</em>.” (The <code>explicit</code> keyword will be explained further down below). Next up we have to use the <code>operator</code> keyword which allows overloading existing C# operators. Then we have <code>Vector3</code> as the type which we overload, ie. essentially our “return type” if you allow such a simplification. In the parameters we have the type we are converting from. In our function body we define how the correct value gets returned. In this example we simply return the value from the private field <code>_myValue</code>.</p><p>The <code>explicit</code> keyword works in pretty much the same way as the <code>implicit</code> keyword, except you have to do the casting yourself, <em>explicitly</em>, when you use it, eg.</p><pre><code class="language-cs">    MyType myType = new MyType(0,0,0);
    SetPositionFromVector3((Vector3) myType); // explicit casting is required with explicit keyword.
</code></pre><p>Instead of implicitly as shown below.</p><pre><code class="language-cs">    MyType myType = new MyType(0,0,0);
    SetPositionFromVector3(myType); // with implicit keyword casting is done automatically.
</code></pre><p>NOTE: If you decide to use the <code>implicit</code> keyword, you have to be careful because it will be less obvious what is going on in the code.</p><p>To do the conversion the other way around, ie. in our example from <code>Vector3</code> to <code>MyType</code>, we can simply switch the places of the types and make sure somehow that the correct type and values are returned.</p><pre><code class="language-cs">class MyType {
    private Vector3 _myValue;
    // This is what we did before.
    public static implicit operator Vector3(MyType myType) =&gt; _myvalue;
    // Here we switched things around.
    public static implicit operator MyType(Vector3 myType) =&gt; new Vector3(myType.x, myType.z, myType.z);
}
</code></pre></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on July 30, 2022</p><ul class="post__tag"><li><a href="https://pilvimaa.fi/tag/c/">C#</a></li><li><a href="https://pilvimaa.fi/tag/conversion/">Conversion</a></li><li><a href="https://pilvimaa.fi/tag/explicit/">Explicit</a></li><li><a href="https://pilvimaa.fi/tag/implicit/">Implicit</a></li></ul><div class="post__share"></div><div class="post__bio bio"><img src="https://pilvimaa.fi/media/website/Pilvinen-As_Space_Techno_Wizard.png" loading="lazy" height="1024" width="1024" class="bio__avatar" alt="Pilvinen"><div class="bio__info"><h3 class="bio__name"><a href="https://pilvimaa.fi/authors/pilvinen/" rel="author">Pilvinen</a></h3><p>Star and Serpent indie game studio founder, team leader, programmer wannabe, and game designer. Human friendly. Likes to talk. Interested in math, sciences, logic, languages, literature, medieval history, programming, philosophy, and games.</p></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://pilvimaa.fi/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://pilvimaa.fi/unit-testing-private-methods-through-extraction/" class="post__nav-link" rel="prev"><span>Previous</span> Unit testing private methods through extraction</a></div><div class="post__nav-next"><a href="https://pilvimaa.fi/node2d-double-click-detection-in-godot/" class="post__nav-link" rel="next"><span>Next</span> Node2D double click detection in Godot </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://pilvimaa.fi/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav></main><footer class="footer"><script defer="defer" src="https://pilvimaa.fi/assets/js/prism.js?v=4bd006477d0d358daace75bbde4ce792"></script><div class="footer__copyright"><p><a href="https://www.starandserpent.com" target="_blank" rel="noopener noreferrer">https://www.starandserpent.com</a></p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://pilvimaa.fi/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="https://pilvimaa.fi/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>